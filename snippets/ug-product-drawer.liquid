<link
        rel="stylesheet"
        href="https://cdn.shopify.com/s/files/1/0257/5246/9566/files/swiper-bundle.min_b4c60233-5e07-47dc-800a-583c16079d0b.css?v=1655275790"
>
<style>
    .ug-product-side-drawer-wrap {
        position: fixed;
        top: 0px;
        left: 0;
        z-index: 2000;
        width: 100vw;
        height: 100vh;
        background: rgba(0, 0, 0, 0.5);
        visibility: hidden;
    }
    .ug-product-side-drawer-wrap.open {
        /*display: block;*/
        visibility: visible;
    }
    .ug-product-side-drawer-wrap.open .ug-product-side-drawer-main {
        transform: translateX(0);
    }
    .ug-product-side-drawer-main {
        position: fixed;
        top: 30px;
        right: 0; /* 初始位置在左侧屏幕外 */
        width: 680px;
        transform: translateX(100%);
        height: calc(100vh - 60px);
        background-color: #fff;
        border-radius: 8px;
        /*transition: left 0.8s ease; !* 添加过渡效果 *!*/
        transition: transform 0.5s cubic-bezier(0.645, 0.045, 0.355, 1), visibility 0.5s cubic-bezier(0.645, 0.045, 0.355, 1);
        padding: 24px;
    }
    .ug-product-side-drawer-title {
        display: flex;
        justify-content: space-between;
        align-items: center;
        border-bottom: 1px solid rgba(0, 0, 0, 0.1);
    }
    .ug-product-side-drawer-title h4 {
        font-size: 24px;
        font-weight: 500;
        color: #000;
        margin: 0;
    }
    .ug-product-side-drawer-close-btn {
        cursor: pointer;
        font-size: 24px;
        color: #000;
    }
    .ug-product-side-drawer-close-btn:hover {
        color: #000;
    }
    .ug-product-side-drawer-content {
        padding: 12px;
        overflow-y: auto;
        height: calc(100vh - 60px - 24px - 24px - 60px);
    }
    .ug-product-side-drawer-content::-webkit-scrollbar {
        width: 8px;
        height: 8px;
    }
    .ug-product-side-drawer-content::-webkit-scrollbar-thumb {
        border-radius: 4px;
        background-color: rgba(0, 0, 0, 0.2);
    }
    .ug-product-side-drawer-content::-webkit-scrollbar-track {
        border-radius: 4px;
        background-color: rgba(0, 0, 0, 0.1);
    }
    .ug-product-side-drawer-images {
        display: flex;
        justify-content: center;
        align-items: center;
        margin-bottom: 24px;
        height: 600px;
    }
    .mySwiper-drawer{
        width: 100%;
        height: 100%;
    }
    .ug-product-side-drawer-images img {
        width: 100%;
        height: 100%;
        object-fit: cover;
        display: block;
    }
    .ug-product-side-drawer-product-title {
        font-size: 24px;
        font-weight: 500;
        color: #000;
        margin-bottom: 8px;
    }
    .ug-product-side-drawer-product-subtitle {
        font-size: 16px;
        font-weight: 400;
        color: #757575;
        margin-bottom: 8px;
    }
    .ug-product-side-drawer-product-star {
        font-size: 16px;
        font-weight: 400;
        color: #757575;
        margin-bottom: 8px;
    }
    .ug-product-side-drawer-product-price {
        font-size: 28px;
        font-weight: 500;
        color: #000;
        padding-bottom: 32px;
        border-bottom: 1px solid rgba(0, 0, 0, 0.1);
        margin-bottom: 32px;
    }
    .ug-product-side-drawer-product-price .price {
        font-size: 28px;
        font-weight: 500;
    }
    .ug-product-side-drawer-product-price .compare_at_price {
        font-size: 16px;
        font-weight: 400;
        color: #727273;
        text-decoration: line-through;
    }
    .ug-product-side-drawer-product-price .t4s-badge-price {
        font-size: 16px;
        font-weight: 400;
        color: #727273;
        margin-left: 8px;
    }
    .ug-product-side-drawer-product-short-description {
        font-size: 16px;
        font-weight: 400;
        color: #757575;
        margin-bottom: 8px;
    }
    .ug-product-side-drawer-product-short-description ul {
        list-style: disc;
        padding-left: 20px;
    }
    .ug-product-side-drawer-product-short-description ul li {
        margin-bottom: 16px;
    }
    .ug-product-side-drawer-product-description p {
        margin-bottom: 8px;
    }
    .ug-drawer-overview {
        font-size: 20px;
        font-weight: 500;
        color: #000;
        margin: 0;
    }
    .ug-drawer-specs {
        font-size: 20px;
        font-weight: 500;
        color: #000;
        margin: 0;
    }
    .ug-product-side-drawer-wrap .swiper-pagination-bullet {
        background-color: black;
    }
    @media (max-width: 767px) {
        .ug-product-side-drawer-wrap.open .ug-product-side-drawer-main {
            right: inherit;
        }
        .ug-product-side-drawer-main {
            width: 94%;
            left: 3%;
            top: 30px;
            right: inherit;
            padding: 12px;
        }
        .ug-product-side-drawer-title h4 {
            font-size: 20px;
        }
        .ug-product-side-drawer-images {
            height: 300px;
        }
        .ug-product-side-drawer-product-title {
            font-size: 18px;
        }
        .ug-product-side-drawer-product-subtitle {
            font-size: 14px;
        }
        .ug-product-side-drawer-product-price {
            font-size: 16px;
        }
        .ug-product-side-drawer-product-price .price{
            font-size: 18px;
        }
        .ug-product-side-drawer-product-price .compare_at_price {
            font-size: 14px;
        }
        .ug-product-side-drawer-product-price .t4s-badge-price {
            font-size: 12px;
        }
        .ug-product-side-drawer-product-price {
            padding-bottom: 16px;
            margin-bottom: 16px;
        }
        .ug-drawer-overview, .ug-drawer-specs {
            font-size: 16px;
        }
        .ug-product-side-drawer-product-short-description ul li {
            font-size: 14px;
        }
    }
</style>
<div class="ug-product-side-drawer-wrap">
    <div id="ug-product-sideDrawer" class="ug-product-side-drawer-main">
        <div class="ug-product-side-drawer-title">
            <h4>Overview</h4>
            <span class="ug-product-side-drawer-close-btn">
                <svg class="icon" aria-hidden="true">
                    <use xlink:href="#icon-delete"></use>
                </svg>
            </span>
        </div>
        <div class="ug-product-side-drawer-content">
            <div class="ug-product-side-drawer-images"></div>
            <div class="ug-product-side-drawer-product-title"></div>
            <div class="ug-product-side-drawer-product-subtitle"></div>
            <div class="ug-product-side-drawer-product-star"></div>
            <div class="ug-product-side-drawer-product-price">
                <span class="price"></span>
                <del class="compare_at_price"></del>
                <span class="t4s-badge-price"></span>
            </div>
            <div class="ug-drawer-overview">Overview</div>
            <div class="ug-product-side-drawer-product-short-description"></div>
            <div class="ug-drawer-specs">Specs</div>
            <div class="ug-product-side-drawer-product-specs"></div>
        </div>
    </div>
</div>
<script>
    $(function () {
        $('.ug-product-side-drawer-close-btn').on('click', function () {
            $.getProductDetailInstance().close()
        })
        const SideDrawer = (() => {
            let instance; // 单例实例

            function init() {
                // 私有方法和属性
                const drawerElement = $('.ug-product-side-drawer-wrap')

                function open(product) {
                    const imagesDom = createImages(product.images)
                    $('.ug-product-side-drawer-product-title').text(product.title)
                    $('.ug-product-side-drawer-images').html(imagesDom)
                    $('.ug-product-side-drawer-product-subtitle').text(product.sub_title)
                    $('.ug-product-side-drawer-product-star').text(product.star)
                    $('.ug-product-side-drawer-product-price .price').text(product.current_price)
                    $('.ug-product-side-drawer-product-price .compare_at_price').text(product.current_compare_at_price)
                    $('.ug-product-side-drawer-product-price .t4s-badge-price').text("SAVE" + product.current_save +' %')
                    $('.ug-product-side-drawer-product-short-description').html(product.short_description)
                    $('.ug-product-side-drawer-product-specs').html(product.specs)
                    if(!product.specs){
                        $('.ug-drawer-specs').hide()
                    } else {
                        $('.ug-drawer-specs').show()
                    }
                    if(!product.short_description){
                        $('.ug-drawer-overview').hide()
                    } else {
                        $('.ug-drawer-overview').show()
                    }
                    if(!product.current_save){
                        $('.ug-product-side-drawer-product-price .t4s-badge-price').hide()
                    } else {
                        $('.ug-product-side-drawer-product-price .t4s-badge-price').show()
                    }
                    var swiper = new Swiper(".mySwiper-drawer", {
                        pagination: {
                            el: ".swiper-pagination-drawer",
                            dynamicBullets: true,
                            // navigation: {
                            //     nextEl: ".swiper-button-next",
                            //     prevEl: ".swiper-button-prev",
                            // },
                        },
                    });
                    drawerElement.addClass('open');
                }

                function close() {
                    drawerElement.removeClass('open');
                }

                function createImages(images) {
                    const swiperArray = images.map(image => {
                        return  `<div class="swiper-slide">
                                    <img src=${image} alt=""/>
                                </div>`
                    })
                    return `<div class="swiper mySwiper-drawer">
                                            <div class="swiper-wrapper">
                                                ${swiperArray.join('')}
                                            </div>
                                            <div class="swiper-pagination swiper-pagination-drawer"></div>
                                        </div>`
                }

                return {
                    // 公共方法和属性
                    open,
                    close
                };
            }

            return {
                // 获取单例实例
                getProductDetailInstance: function (product) {
                    if (!instance) {
                        instance = init();
                    }
                    return instance;
                }
            };
        })();
        $.extend({
            getProductDetailInstance: function () {
                return SideDrawer.getProductDetailInstance();
            }
        })
    })

</script>
<script src="https://cdn.shopify.com/s/files/1/0257/5246/9566/files/swiper-bundle.min_23a60c44-0efc-4129-bf9f-c046f688609a.js?v=1655275790"></script>
