{% comment %}
This file is auto-generated by PageFly. The content can be overridden when publish page in PageFly. Please do not update this file directly.
If you plan to remove PageFly, please see the guide in our help center first: https://help.pagefly.io/.
{% endcomment %}
{% render 'pagefly-settings' %} <link rel="stylesheet" href="{{ 'pagefly.ffc3e79e.css' | asset_url }}">
		  <div style="opacity:0" class="sc-giYglK ednkXg __pf" id="__pf"><div data-pf-type="Body" class="sc-eGRUor kuwnRP pf-1_"><div data-pf-type="Layout" class="sc-fbyfCU jnxXJu pf-2_"><div data-pf-type="Section" class="sc-fHeRUh ixLxDV pf-10_"><div style="--cw:2000px" class="sc-evcjhq leJfDA"><div class="sc-iJKOTD qriss pf-9_ pf-r pf-r-eh" style="--s-xs:15px;--s-lg:14px" data-pf-type="Row"><div class="pf-c" style="--c-xs:12;--c-lg:12"><div data-pf-type="Column" class="sc-ctqQKy imxmpH pf-8_"><div data-pf-type="Custom.HTML" class="sc-kHOZwM gGGBsj pf-7_"><a class="J_curr_diy_add_cart" href="javascript:;" data-action="add-to-cart">加入购物车</a>
<a class="J_curr_diy_buy_now" href="javascript:;">立即购买</a>
<script type="text/javascript">
var curr_diy_buy = {
	_init:function(){
		var c = curr_diy_buy;
		c._listen_add_cart();
		c._listen_buy_now();
	},	
	_listen_add_cart:function(){
		var c = curr_diy_buy;
		$('.J_curr_diy_add_cart').click(function(){
			var int_quantity = 1;
			var str_item_id = '39546758037566';
			var str_option0 = 'Black';
			var str_option1 = 'US';
			var arr_data = {form_type: 'product',id: str_item_id,'option-0':str_option0,'option-1':str_option1,quantity: int_quantity};
			$.ajax({
				url: "/cart/add.js", 
				type: 'post',
				data: arr_data,
				dataType: 'json',
				success: function (_data) {
					//console.log(123);
					var obj = $('.Header__CartCount');
					var int_cart_count = parseInt(obj.html()) + 1;
					obj.html(int_cart_count);
					obj.css('display','block');
					c.open_cart();
				},
				complete : function(){
				}
			});					 
		});
	},
	_listen_buy_now:function(){
		$('.J_curr_diy_buy_now').click(function(){
			var int_quantity = 1;
			var str_variant_id = '39600287776830';
			var arr_data = {
			    "checkout": {
				"line_items": [
				    {
					"variant_id": str_variant_id,
					"quantity": int_quantity
				    }
				],
				"secret": true,
				"wallet_name": "Checkout",
				"is_upstream_button": true,
				"page_type": "product",
				"presentment_currency": "USD",
			    }
			};
			$.ajax({
				url: "/wallets/checkouts.json", 
				type: 'post',
				data: JSON.stringify(arr_data),
				contentType: 'application/json',
				dataType: 'json', 
				headers:{'authorization':'Basic ZDFkZDZkYTc1ZDU0ZWVkYzkyNGMxZTkxNTA3OWY2ZmU='},
				success: function (_data) {
					window.location.href = _data.checkout.web_url;
				},
				complete : function(){
				}
			});					
		});	
	},
	open_cart:function(){
		var c = curr_diy_buy;
		$.ajax({
			url: "/cart?view=drawer", 
			type: 'get',
			dataType: 'html',
			cache:false,
			success: function (_html) {
				//console.log(123);
				var obj = document.createElement('div');
			        obj.innerHTML = _html;
				var obj_old = document.getElementById('sidebar-cart');
				//var obj_parent = obj_old.parentNode;
				obj_old.replaceChild(obj.querySelector('.Cart'), obj_old.querySelector('.Cart'));
				setTimeout(function(){
					c.trigger_event(document.getElementById('J_open_sidebar_cart'),'click');		    
				},100);
			},
			complete : function(){
				
			}
		});
			
	},
	trigger_event:function(obj,str_event){
		var obj_event = document.createEvent('HTMLEvents');
		obj_event.initEvent(str_event,true,true);
		obj.dispatchEvent(obj_event);
	}
}
curr_diy_buy._init();
</script></div></div></div></div></div></div></div></div></div><script>window.__pagefly_setting__={"baseURL":"https://apps.pagefly.io","analyticsURL":"https://analytics.pagefly.io","isBackend":false,"cdnURL":"https://cdn.pagefly.io","pageflyVersion":"3.15.0","shopDomain":"ugreenmall.myshopify.com","elementData":{},"pageTitle":"add-cart-test","pageType":"page","pageId":"ffc3e79e-4144-48e9-87f6-d4fee711678d","lazyLoad":true,"forceByPassGoogleLightHouse":false,"imageLazyLoad":true,"useThemeJQ":false,"selectedFonts":{},"trackingIDs":[],"shopifyProxyPath":"/a/pf_preview"};window.__pagefly_setting__.moneyFormat={{shop.money_format|json}};</script><script src="https://cdn.pagefly.io/pagefly/3.15.0/core/helper.js" async></script>
{% schema %}
{
  "name": "PageFly Page ffc3e79e",
  "settings": [
    {
      "type": "paragraph",
      "content": "For full configuration, [visit PageFly Editor](https://apps.pagefly.io/editor?id=ffc3e79e-4144-48e9-87f6-d4fee711678d)."
    }
  ]
}
{% endschema %}